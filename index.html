<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memeaquí - Crea y comparte memes de fútbol</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #e0f7fa 0%, #bbdefb 50%, #ffcdd2 100%);
            min-height: 100vh;
        }
        
        .team-selector .active {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .meme-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .rating-stars {
            color: #ffc107;
        }
        
        .donate-btn {
            background-color: #4fc3f7;
            transition: all 0.3s ease;
        }
        
        .donate-btn:hover {
            background-color: #039be5;
        }
        
        .madrid-bg {
            background-color: rgba(0, 86, 179, 0.1);
        }
        
        .barca-bg {
            background-color: rgba(178, 34, 52, 0.1);
        }
        
        #meme-canvas {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-8">
            <div class="flex items-center mb-4 md:mb-0">
                <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-red-500">
                    Memeaquí
                </h1>
                <span class="ml-2 text-xs text-white">Creator: Santiago Díaz</span>
            </div>
            
            <div class="flex space-x-4">
                <a href="https://wa.me/04126363859" 
                   class="donate-btn px-4 py-2 rounded-full text-white font-semibold flex items-center">
                    <i class="fab fa-paypal mr-2"></i> Donar
                </a>
                <a href="https://chat.whatsapp.com/IwfL6aGPEMu4WI8cYJmEub" 
                   class="bg-green-500 hover:bg-green-600 px-4 py-2 rounded-full text-white font-semibold flex items-center">
                    <i class="fas fa-lightbulb mr-2"></i> Dar ideas
                </a>
            </div>
        </header>
        
        <!-- Team Selector -->
        <div class="team-selector flex justify-center mb-10">
            <div class="flex bg-white rounded-full p-1 shadow-lg">
                <button id="madrid-btn" class="active px-6 py-2 rounded-full font-bold text-white bg-blue-600 flex items-center transition-all duration-300">
                    <img src="https://upload.wikimedia.org/wikipedia/en/thumb/5/56/Real_Madrid_CF.svg/1200px-Real_Madrid_CF.svg.png" class="w-6 h-6 mr-2" alt="Real Madrid">
                    Madrid
                </button>
                <button id="barca-btn" class="px-6 py-2 rounded-full font-bold text-white bg-red-500 flex items-center transition-all duration-300 ml-2">
                    <img src="https://upload.wikimedia.org/wikipedia/en/thumb/4/47/FC_Barcelona_%28crest%29.svg/1200px-FC_Barcelona_%28crest%29.svg.png" class="w-6 h-6 mr-2" alt="Barcelona">
                    Barca
                </button>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Create Meme Section -->
            <div class="lg:w-1/3 bg-white rounded-xl shadow-md p-6">
                <h2 class="text-2xl font-bold mb-4 text-center">Crear Meme</h2>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">Nombre del meme:</label>
                    <input type="text" id="meme-name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ej: El Clásico" required>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">Selecciona equipo:</label>
                    <select id="meme-team" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="madrid">Real Madrid</option>
                        <option value="barca">FC Barcelona</option>
                    </select>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">Sube tu imagen:</label>
                    <input type="file" id="meme-image" accept="image/*" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">O pega URL de imagen:</label>
                    <input type="url" id="meme-url" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="https://ejemplo.com/meme.jpg">
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">Texto superior:</label>
                    <input type="text" id="top-text" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Texto arriba">
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">Texto inferior:</label>
                    <input type="text" id="bottom-text" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Texto abajo">
                </div>
                
                <div class="flex justify-center">
                    <button id="create-meme-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold transition duration-300">
                        Crear Meme
                    </button>
                </div>
                
                <div id="meme-preview-container" class="mt-6 hidden">
                    <h3 class="text-lg font-semibold mb-2">Vista previa:</h3>
                    <div id="meme-preview" class="relative bg-gray-200 rounded-lg overflow-hidden">
                        <canvas id="meme-canvas" class="w-full"></canvas>
                    </div>
                    <div class="flex justify-between mt-4">
                        <button id="save-meme-btn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-semibold transition duration-300">
                            <i class="fab fa-whatsapp mr-2"></i> Usar en WhatsApp
                        </button>
                        <button id="delete-meme-btn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold transition duration-300">
                            <i class="fas fa-trash mr-2"></i> Borrar
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Memes Gallery -->
            <div class="lg:w-2/3">
                <h2 class="text-2xl font-bold mb-4 text-center" id="gallery-title">Memes de Madrid</h2>
                
                <div id="madrid-memes" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 madrid-bg p-4 rounded-xl">
                    <!-- Sample Madrid Meme 1 -->
                    <div class="meme-card bg-white rounded-xl shadow-md overflow-hidden transition duration-300">
                        <img src="https://i.imgflip.com/7b1gow.jpg" alt="Meme de Madrid" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="font-semibold">El Clásico</h3>
                            <div class="flex justify-between items-center mt-2">
                                <div class="rating-stars" data-meme-id="1">
                                    <i class="fas fa-star" data-rating="1"></i>
                                    <i class="fas fa-star" data-rating="2"></i>
                                    <i class="fas fa-star" data-rating="3"></i>
                                    <i class="fas fa-star" data-rating="4"></i>
                                    <i class="fas fa-star-half-alt" data-rating="5"></i>
                                    <span class="text-xs text-gray-600 ml-1">(24)</span>
                                </div>
                                <button class="like-btn text-red-500" data-likes="56">
                                    <i class="fas fa-heart"></i> <span class="like-count">56</span>
                                </button>
                            </div>
                            <button class="w-full mt-3 bg-blue-500 hover:bg-blue-600 text-white py-1 rounded-lg text-sm font-semibold transition duration-300 use-whatsapp-btn" 
                                    data-image="https://i.imgflip.com/7b1gow.jpg">
                                <i class="fab fa-whatsapp mr-1"></i> Usar
                            </button>
                        </div>
                    </div>
                    
                    <!-- Sample Madrid Meme 2 -->
                    <div class="meme-card bg-white rounded-xl shadow-md overflow-hidden transition duration-300">
                        <img src="https://i.imgflip.com/7b1h1x.jpg" alt="Meme de Madrid" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="font-semibold">Champions</h3>
                            <div class="flex justify-between items-center mt-2">
                                <div class="rating-stars" data-meme-id="2">
                                    <i class="fas fa-star" data-rating="1"></i>
                                    <i class="fas fa-star" data-rating="2"></i>
                                    <i class="fas fa-star" data-rating="3"></i>
                                    <i class="fas fa-star" data-rating="4"></i>
                                    <i class="far fa-star" data-rating="5"></i>
                                    <span class="text-xs text-gray-600 ml-1">(18)</span>
                                </div>
                                <button class="like-btn text-red-500" data-likes="42">
                                    <i class="far fa-heart"></i> <span class="like-count">42</span>
                                </button>
                            </div>
                            <button class="w-full mt-3 bg-blue-500 hover:bg-blue-600 text-white py-1 rounded-lg text-sm font-semibold transition duration-300 use-whatsapp-btn" 
                                    data-image="https://i.imgflip.com/7b1h1x.jpg">
                                <i class="fab fa-whatsapp mr-1"></i> Usar
                            </button>
                        </div>
                    </div>
                </div>
                
                <div id="barca-memes" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 barca-bg p-4 rounded-xl hidden">
                    <!-- Sample Barca Meme 1 -->
                    <div class="meme-card bg-white rounded-xl shadow-md overflow-hidden transition duration-300">
                        <img src="https://i.imgflip.com/7b1h7w.jpg" alt="Meme de Barca" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="font-semibold">La Masía</h3>
                            <div class="flex justify-between items-center mt-2">
                                <div class="rating-stars" data-meme-id="3">
                                    <i class="fas fa-star" data-rating="1"></i>
                                    <i class="fas fa-star" data-rating="2"></i>
                                    <i class="fas fa-star" data-rating="3"></i>
                                    <i class="fas fa-star" data-rating="4"></i>
                                    <i class="fas fa-star" data-rating="5"></i>
                                    <span class="text-xs text-gray-600 ml-1">(32)</span>
                                </div>
                                <button class="like-btn text-red-500" data-likes="78">
                                    <i class="fas fa-heart"></i> <span class="like-count">78</span>
                                </button>
                            </div>
                            <button class="w-full mt-3 bg-blue-500 hover:bg-blue-600 text-white py-1 rounded-lg text-sm font-semibold transition duration-300 use-whatsapp-btn" 
                                    data-image="https://i.imgflip.com/7b1h7w.jpg">
                                <i class="fab fa-whatsapp mr-1"></i> Usar
                            </button>
                        </div>
                    </div>
                    
                    <!-- Sample Barca Meme 2 -->
                    <div class="meme-card bg-white rounded-xl shadow-md overflow-hidden transition duration-300">
                        <img src="https://i.imgflip.com/7b1hbn.jpg" alt="Meme de Barca" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="font-semibold">Tiki Taka</h3>
                            <div class="flex justify-between items-center mt-2">
                                <div class="rating-stars" data-meme-id="4">
                                    <i class="fas fa-star" data-rating="1"></i>
                                    <i class="fas fa-star" data-rating="2"></i>
                                    <i class="fas fa-star" data-rating="3"></i>
                                    <i class="fas fa-star-half-alt" data-rating="4"></i>
                                    <i class="far fa-star" data-rating="5"></i>
                                    <span class="text-xs text-gray-600 ml-1">(15)</span>
                                </div>
                                <button class="like-btn text-red-500" data-likes="37">
                                    <i class="far fa-heart"></i> <span class="like-count">37</span>
                                </button>
                            </div>
                            <button class="w-full mt-3 bg-blue-500 hover:bg-blue-600 text-white py-1 rounded-lg text-sm font-semibold transition duration-300 use-whatsapp-btn" 
                                    data-image="https://i.imgflip.com/7b1hbn.jpg">
                                <i class="fab fa-whatsapp mr-1"></i> Usar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ratings Section -->
        <div class="mt-12 bg-white rounded-xl shadow-md p-6">
            <h2 class="text-2xl font-bold mb-6 text-center">Califica Memeaquí</h2>
            <div class="flex flex-col items-center">
                <div class="rating-stars text-4xl mb-4" id="page-rating">
                    <i class="far fa-star hover:text-yellow-400 cursor-pointer" data-rating="1"></i>
                    <i class="far fa-star hover:text-yellow-400 cursor-pointer" data-rating="2"></i>
                    <i class="far fa-star hover:text-yellow-400 cursor-pointer" data-rating="3"></i>
                    <i class="far fa-star hover:text-yellow-400 cursor-pointer" data-rating="4"></i>
                    <i class="far fa-star hover:text-yellow-400 cursor-pointer" data-rating="5"></i>
                </div>
                <p class="text-gray-600 mb-4">Selecciona de 1 a 5 estrellas para calificar nuestra página</p>
                <button id="submit-rating" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold transition duration-300">
                    Enviar Calificación
                </button>
                <div id="rating-thankyou" class="hidden mt-2 text-green-600 font-semibold">
                    ¡Gracias por tu calificación!
                </div>
            </div>
        </div>
        
        <!-- Comments Section -->
        <div class="mt-8 bg-white rounded-xl shadow-md p-6">
            <h2 class="text-2xl font-bold mb-6">Opiniones</h2>
            
            <div class="mb-6">
                <textarea id="comment-input" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="3" placeholder="Escribe tu opinión sobre Memeaquí..."></textarea>
                <button id="submit-comment" class="mt-2 bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold transition duration-300">
                    Publicar Opinión
                </button>
            </div>
            
            <div id="comments-container">
                <!-- Sample Comment 1 -->
                <div class="border-b pb-4 mb-4">
                    <div class="flex items-center mb-2">
                        <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold">J</div>
                        <span class="ml-2 font-semibold">Juan Pérez</span>
                        <span class="ml-auto text-sm text-gray-500">Hace 2 días</span>
                    </div>
                    <p class="text-gray-700">¡Excelente página! Los memes son muy divertidos y fáciles de usar en WhatsApp.</p>
                    <div class="flex mt-2">
                        <button class="text-blue-500 text-sm mr-4 like-comment-btn"><i class="far fa-thumbs-up mr-1"></i> <span>12</span> Me gusta</button>
                        <button class="text-gray-500 text-sm">Responder</button>
                    </div>
                </div>
                
                <!-- Sample Comment 2 -->
                <div class="border-b pb-4 mb-4">
                    <div class="flex items-center mb-2">
                        <div class="w-8 h-8 rounded-full bg-red-500 flex items-center justify-center text-white font-semibold">M</div>
                        <span class="ml-2 font-semibold">María Gómez</span>
                        <span class="ml-auto text-sm text-gray-500">Hace 1 semana</span>
                    </div>
                    <p class="text-gray-700">Me encanta poder crear mis propios memes del Clásico. ¡Muy buena idea!</p>
                    <div class="flex mt-2">
                        <button class="text-blue-500 text-sm mr-4 like-comment-btn"><i class="far fa-thumbs-up mr-1"></i> <span>8</span> Me gusta</button>
                        <button class="text-gray-500 text-sm">Responder</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Team selector functionality
        const madridBtn = document.getElementById('madrid-btn');
        const barcaBtn = document.getElementById('barca-btn');
        const madridMemes = document.getElementById('madrid-memes');
        const barcaMemes = document.getElementById('barca-memes');
        const galleryTitle = document.getElementById('gallery-title');
        
        madridBtn.addEventListener('click', () => {
            madridBtn.classList.add('active');
            barcaBtn.classList.remove('active');
            madridMemes.classList.remove('hidden');
            barcaMemes.classList.add('hidden');
            galleryTitle.textContent = 'Memes de Madrid';
        });
        
        barcaBtn.addEventListener('click', () => {
            barcaBtn.classList.add('active');
            madridBtn.classList.remove('active');
            barcaMemes.classList.remove('hidden');
            madridMemes.classList.add('hidden');
            galleryTitle.textContent = 'Memes de Barca';
        });
        
        // Meme creation functionality
        const createMemeBtn = document.getElementById('create-meme-btn');
        const memePreviewContainer = document.getElementById('meme-preview-container');
        const memeCanvas = document.getElementById('meme-canvas');
        const ctx = memeCanvas.getContext('2d');
        let currentMemeUrl = '';
        
        createMemeBtn.addEventListener('click', () => {
            const memeName = document.getElementById('meme-name').value;
            
            if (!memeName) {
                alert('Por favor ingresa un nombre para el meme');
                return;
            }
            
            const imageInput = document.getElementById('meme-image');
            const imageUrl = document.getElementById('meme-url').value;
            
            if (!imageInput.files[0] && !imageUrl) {
                alert('Por favor sube una imagen o ingresa una URL');
                return;
            }
            
            // Show preview container
            memePreviewContainer.classList.remove('hidden');
            
            // Create meme
            const topText = document.getElementById('top-text').value;
            const bottomText = document.getElementById('bottom-text').value;
            
            let img = new Image();
            img.crossOrigin = "Anonymous";
            
            if (imageInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    img.onload = function() {
                        drawMeme(img, topText, bottomText);
                        currentMemeUrl = memeCanvas.toDataURL('image/png');
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(imageInput.files[0]);
            } else {
                img.onload = function() {
                    drawMeme(img, topText, bottomText);
                    currentMemeUrl = memeCanvas.toDataURL('image/png');
                };
                img.src = imageUrl;
            }
        });
        
        function drawMeme(img, topText, bottomText) {
            // Set canvas size (max 800x600 but keep aspect ratio)
            const maxWidth = 800;
            const maxHeight = 600;
            let width = img.width;
            let height = img.height;
            
            if (width > maxWidth) {
                height = (maxWidth / width) * height;
                width = maxWidth;
            }
            
            if (height > maxHeight) {
                width = (maxHeight / height) * width;
                height = maxHeight;
            }
            
            memeCanvas.width = width;
            memeCanvas.height = height;
            
            // Draw image
            ctx.drawImage(img, 0, 0, width, height);
            
            // Text style
            ctx.fillStyle = 'white';
            ctx.strokeStyle = 'black';
            ctx.lineWidth = Math.max(width / 200, 2); // Scale with image size
            ctx.textAlign = 'center';
            
            // Calculate font size based on image width
            const fontSize = Math.max(width / 15, 20);
            ctx.font = `bold ${fontSize}px Impact`;
            
            // Top text
            if (topText) {
                ctx.fillText(topText.toUpperCase(), width/2, fontSize + 10);
                ctx.strokeText(topText.toUpperCase(), width/2, fontSize + 10);
            }
            
            // Bottom text
            if (bottomText) {
                ctx.fillText(bottomText.toUpperCase(), width/2, height - 10);
                ctx.strokeText(bottomText.toUpperCase(), width/2, height - 10);
            }
        }
        
        // Save meme to WhatsApp
        const saveMemeBtn = document.getElementById('save-meme-btn');
        saveMemeBtn.addEventListener('click', () => {
            if (!currentMemeUrl) {
                alert('Primero crea un meme');
                return;
            }
            
            // Create a temporary link to download the image
            const link = document.createElement('a');
            link.href = currentMemeUrl;
            link.download = 'meme-aqui.png';
            
            // Trigger download
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Open WhatsApp with instructions
            const whatsappMessage = encodeURIComponent("Mira este meme que creé en Memeaquí. Para usarlo como sticker:\n1. Guarda esta imagen en tu galería\n2. Abre WhatsApp y ve a cualquier chat\n3. Toca el clip y selecciona 'Sticker'\n4. Toca '+' para añadir un nuevo sticker\n5. Selecciona esta imagen y ajusta como prefieras");
            window.open(`https://wa.me/?text=${whatsappMessage}`);
        });
        
        // Delete meme
        const deleteMemeBtn = document.getElementById('delete-meme-btn');
        deleteMemeBtn.addEventListener('click', () => {
            memePreviewContainer.classList.add('hidden');
            document.getElementById('meme-name').value = '';
            document.getElementById('meme-image').value = '';
            document.getElementById('meme-url').value = '';
            document.getElementById('top-text').value = '';
            document.getElementById('bottom-text').value = '';
            currentMemeUrl = '';
        });
        
        // Rating functionality for page
        const pageRatingStars = document.querySelectorAll('#page-rating i');
        let pageSelectedRating = 0;
        
        pageRatingStars.forEach(star => {
            star.addEventListener('click', () => {
                pageSelectedRating = parseInt(star.getAttribute('data-rating'));
                
                pageRatingStars.forEach((s, index) => {
                    if (index < pageSelectedRating) {
                        s.classList.remove('far');
                        s.classList.add('fas');
                    } else {
                        s.classList.remove('fas');
                        s.classList.add('far');
                    }
                });
            });
            
            star.addEventListener('mouseover', () => {
                const hoverRating = parseInt(star.getAttribute('data-rating'));
                
                pageRatingStars.forEach((s, index) => {
                    if (index < hoverRating) {
                        s.classList.add('text-yellow-400');
                    } else {
                        s.classList.remove('text-yellow-400');
                    }
                });
            });
            
            star.addEventListener('mouseout', () => {
                pageRatingStars.forEach((s, index) => {
                    if (index >= pageSelectedRating) {
                        s.classList.remove('text-yellow-400');
                    }
                });
            });
        });
        
        document.getElementById('submit-rating').addEventListener('click', () => {
            if (pageSelectedRating === 0) {
                alert('Por favor selecciona una calificación');
                return;
            }
            
            document.getElementById('rating-thankyou').classList.remove('hidden');
            // In a real app, you would send this to your backend
            setTimeout(() => {
                document.getElementById('rating-thankyou').classList.add('hidden');
            }, 3000);
        });
        
        // Rating functionality for memes
        document.querySelectorAll('.rating-stars').forEach(ratingContainer => {
            const stars = ratingContainer.querySelectorAll('i');
            let selectedRating = 0;
            const memeId = ratingContainer.getAttribute('data-meme-id');
            
            // Check if user already rated this meme
            const storedRating = localStorage.getItem(`meme-rating-${memeId}`);
            if (storedRating) {
                selectedRating = parseInt(storedRating);
                stars.forEach((star, index) => {
                    if (index < selectedRating) {
                        star.classList.remove('far');
                        star.classList.add('fas');
                    } else {
                        star.classList.remove('fas');
                        star.classList.add('far');
                    }
                });
            }
            
            stars.forEach(star => {
                star.addEventListener('click', () => {
                    selectedRating = parseInt(star.getAttribute('data-rating'));
                    localStorage.setItem(`meme-rating-${memeId}`, selectedRating);
                    
                    stars.forEach((s, index) => {
                        if (index < selectedRating) {
                            s.classList.remove('far');
                            s.classList.add('fas');
                        } else {
                            s.classList.remove('fas');
                            s.classList.add('far');
                        }
                    });
                });
                
                star.addEventListener('mouseover', () => {
                    if (!localStorage.getItem(`meme-rating-${memeId}`)) {
                        const hoverRating = parseInt(star.getAttribute('data-rating'));
                        
                        stars.forEach((s, index) => {
                            if (index < hoverRating) {
                                s.classList.add('text-yellow-400');
                            } else {
                                s.classList.remove('text-yellow-400');
                            }
                        });
                    }
                });
                
                star.addEventListener('mouseout', () => {
                    if (!localStorage.getItem(`meme-rating-${memeId}`)) {
                        stars.forEach((s, index) => {
                            if (index >= selectedRating) {
                                s.classList.remove('text-yellow-400');
                            }
                        });
                    }
                });
            });
        });
        
        // Comments functionality
        document.getElementById('submit-comment').addEventListener('click', () => {
            const commentInput = document.getElementById('comment-input');
            const commentText = commentInput.value.trim();
            
            if (!commentText) {
                alert('Por favor escribe tu opinión');
                return;
            }
            
            // Create new comment element
            const commentsContainer = document.getElementById('comments-container');
            const newComment = document.createElement('div');
            newComment.className = 'border-b pb-4 mb-4';
            newComment.innerHTML = `
                <div class="flex items-center mb-2">
                    <div class="w-8 h-8 rounded-full bg-purple-500 flex items-center justify-center text-white font-semibold">U</div>
                    <span class="ml-2 font-semibold">Usuario</span>
                    <span class="ml-auto text-sm text-gray-500">Ahora</span>
                </div>
                <p class="text-gray-700">${commentText}</p>
                <div class="flex mt-2">
                    <button class="text-blue-500 text-sm mr-4 like-comment-btn"><i class="far fa-thumbs-up mr-1"></i> <span>0</span> Me gusta</button>
                    <button class="text-gray-500 text-sm">Responder</button>
                </div>
            `;
            
            // Insert at the top
            commentsContainer.insertBefore(newComment, commentsContainer.firstChild);
            
            // Clear input
            commentInput.value = '';
            
            // In a real app, you would send this to your backend
        });
        
        // Like functionality for comments
        document.addEventListener('click', function(e) {
            if (e.target.closest('.like-comment-btn')) {
                const btn = e.target.closest('.like-comment-btn');
                const icon = btn.querySelector('i');
                const countSpan = btn.querySelector('span');
                let count = parseInt(countSpan.textContent);
                
                if (icon.classList.contains('far')) {
                    icon.classList.remove('far');
                    icon.classList.add('fas');
                    countSpan.textContent = count + 1;
                } else {
                    icon.classList.remove('fas');
                    icon.classList.add('far');
                    countSpan.textContent = count - 1;
                }
            }
        });
        
        // Like functionality for memes
        document.querySelectorAll('.like-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const icon = this.querySelector('i');
                const countSpan = this.querySelector('.like-count');
                let count = parseInt(countSpan.textContent);
                
                if (icon.classList.contains('far')) {
                    icon.classList.remove('far');
                    icon.classList.add('fas');
                    countSpan.textContent = count + 1;
                } else {
                    icon.classList.remove('fas');
                    icon.classList.add('far');
                    countSpan.textContent = count - 1;
                }
            });
        });
        
        // Use meme in WhatsApp
        document.querySelectorAll('.use-whatsapp-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const memeImage = this.getAttribute('data-image');
                const memeName = this.closest('.meme-card').querySelector('h3').textContent;
                
                // Create a temporary link to download the image
                const link = document.createElement('a');
                link.href = memeImage;
                link.download = `meme-${memeName.toLowerCase().replace(/\s+/g, '-')}.png`;
                
                // Trigger download
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Open WhatsApp with instructions
                const whatsappMessage = encodeURIComponent(`Mira este meme "${memeName}" de Memeaquí. Para usarlo como sticker:\n1. Guarda esta imagen en tu galería\n2. Abre WhatsApp y ve a cualquier chat\n3. Toca el clip y selecciona 'Sticker'\n4. Toca '+' para añadir un nuevo sticker\n5. Selecciona esta imagen y ajusta como prefieras`);
                window.open(`https://wa.me/?text=${whatsappMessage}`);
            });
        });
    </script>
</body>
</html>